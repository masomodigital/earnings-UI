<!-- Save this as index.html and push to your GitHub repo for GitHub Pages -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Earnings Dashboard</title>
  <style>
    /* (keep your styles here â€” unchanged) */
  </style>
</head>
<body>
  <!-- (same body HTML as before) -->

  <script>
    const GAS_ENDPOINT = "https://script.google.com/macros/s/AKfycbwnVJyKoqn-knXyO5ne2qnU9Xya0l5OJqtdfxUR9R7Dx3Sn-oGI8LL6fRRRVrhQLS0-ZA/exec";

    function login() {
      const nationalId = document.getElementById('nationalId').value.trim();
      const password = document.getElementById('password').value.trim();
      const errorDiv = document.getElementById('error');
      errorDiv.textContent = '';

      if (!nationalId || !password) {
        errorDiv.textContent = 'Please enter both National ID and Password.';
        return;
      }

      fetch(GAS_ENDPOINT, {
        method: 'POST',
        body: JSON.stringify({ nationalId, password }),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.json())
      .then(response => {
        if (response.success) {
          document.getElementById('login-form').style.display = 'none';
          document.getElementById('welcome-msg').style.display = 'block';
          document.getElementById('username').textContent = response.name;
          document.getElementById('dashboard').style.display = 'block';

          const tbody = document.getElementById('user-data');
          tbody.innerHTML = '';

          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${response.name}</td>
            <td>${response.credits}</td>
            <td>${response.phone}</td>
            <td>
              <span class="promo-code" onclick="copyToClipboard('${response.promo}')">${response.promo}</span>
              <button class="copy-button" onclick="copyToClipboard('${response.promo}')">Copy</button>
            </td>
            <td style="color:red;">${Number(response.earnings).toFixed(2)}</td>
          `;
          tbody.appendChild(tr);
        } else {
          errorDiv.textContent = response.message || 'Login failed';
        }
      })
      .catch(err => {
        console.error('Login Error:', err);
        errorDiv.textContent = 'Failed to contact server.';
      });
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text)
        .then(() => alert('Promo code copied: ' + text))
        .catch(() => alert('Failed to copy promo code.'));
    }

    function logout() {
      document.getElementById('dashboard').style.display = 'none';
      document.getElementById('welcome-msg').style.display = 'none';
      document.getElementById('login-form').style.display = 'block';
      document.getElementById('nationalId').value = '';
      document.getElementById('password').value = '';
      document.getElementById('error').textContent = '';
    }
  </script>
</body>
</html>
